{% extends 'index.html' %}
{% load static %}
{% block style %}
{% comment %} <link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap.min.css' %}" /> {% endcomment %}
<link rel="stylesheet" href="{% static 'css/all.min.css' %}" />
{% endblock %}
{% block content %}

<div id="home" class=" d-flex justify-content-center align-items-center">
  <div class="container my-5 py-3 mx-auto shadow" id="section_detail">
    <div class="d-flex justify-content-center align-items-center parent-image">
      <div class="oval-image">
        <img src="{{ project.img.0.getImgURL }}" alt="" width="100%" />
      </div>
    </div>

    <div>
      <div class="text-center detail-info">
        <h2>{{ project.title }}</h2>

        <div class="d-flex justify-content-center align-items-center">
          <h4>Details:</h4>
          <span>{{ project.details }}</span>
        </div>

        <div class="d-flex justify-content-center align-items-center">
          <h4>Total Target:</h4>
          <span>{{ project.totalTarget }}</span>
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <h4>Start Date:</h4>
          <span>{{ project.startTime }}</span>
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <h4>End Date:</h4>
          <span>{{ project.endTime }}</span>
        </div>
        <div class="d-flex justify-content-center align-items-center">
          <h4>Category:</h4>
          <p>{{ project.category_id }}</p>
        </div>
       
        {% if last_rate%}
        <div class='d-flex justify-content-center align-items-center'>
          <h4>Rate:</h4>
          <h5 class='center mx-2'>{{ last_rate.rate }}
            <i class="fas fa-star text-warning fs-5"></i>

          </h5>
        </div>

        {% endif %}
        {% if sum_donate %}
        <div class='d-flex justify-content-center align-items-center'>
          <h4>Donate:</h4>
          <h5 class='center mx-2'>{{ sum_donate }}
          </h5>
        </div>
        {% endif %}

        {% if messages %}
        {% for message in messages %}
            {% if forloop.last %}
                <p class="text-danger fs-3">{{ message }}</p>
            {% endif %}
        {% endfor %}
    {% endif %}

    <form method="get" enctype="multipart/form-data" action="{% url 'add_donate' project.id %}">
      {% csrf_token %}
      <div class="d-flex my-3 justify-content-center align-items-center">
        <input type="number" name='donation_value' placeholder='Enter The Donate' required>
        <button type="submit" class="btn btn-primary ms-3">Add Donate</button>
      </div>
    </form>
     
        <div class="d-flex my-3 justify-content-center align-items-center">
          <button id="addRateBtn" class="btn btn-primary">Add Rate</button>
        </div>
        <div class="d-flex my-2  justify-content-center align-items-center">
          
          <a href="{% url 'comment' project.id%}">
            <button id="addComment" class="btn btn-primary">Add Comment</button>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.getElementById('addRateBtn').addEventListener('click', function() {
    var rate = prompt('Enter rate:');
    if (rate !== null && rate !== '') {
      window.location.href = "{% url 'add_rate' project.id %}?rate=" + rate;
    }
    
  });
</script>

{% endblock %}
 